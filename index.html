<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COLORS ‚Äî Gesture Palette Synthesizer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Outfit:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="noise-overlay"></div>
    
    <header class="header">
        <div class="logo">
            <span class="logo-main">COLORS</span>
            <span class="logo-sub">gesture palette synthesizer</span>
        </div>
        <div class="midi-status" id="midiStatus">
            <span class="midi-dot"></span>
            <span class="midi-text">MIDI: waiting...</span>
        </div>
    </header>

    <main class="main-container">
        <!-- Left Panel: Controls -->
        <section class="control-panel">
            <div class="panel-section">
                <h2 class="section-title">ENGINE</h2>
                <div class="engine-selector">
                    <button class="engine-btn active" data-engine="honey">HONEY</button>
                    <button class="engine-btn" data-engine="vinegar">VINEGAR</button>
                    <button class="engine-btn" data-engine="molly">MOLLY</button>
                </div>
                <button class="action-btn randomize-btn" id="randomizePatch">
                    <span class="btn-icon">‚ü≥</span> RANDOM PATCH
                </button>
                <button class="action-btn view-synth-btn" id="viewSynthBtn">
                    <span class="btn-icon">üéõÔ∏è</span>
                    <span>VIEW SYNTH</span>
                </button>
            </div>

            <div class="panel-section">
                <h2 class="section-title">VOICES</h2>
                <div class="param-row">
                    <label>Polyphony</label>
                    <input type="range" id="polyphony" min="1" max="16" value="8">
                    <span class="param-value" id="polyphonyValue">8</span>
                </div>
            </div>

            <div class="panel-section">
                <h2 class="section-title">HARMONY</h2>
                <div class="param-row">
                    <label>Root</label>
                    <select id="rootNote">
                        <option value="C">C</option>
                        <option value="C#">C#</option>
                        <option value="D">D</option>
                        <option value="D#">D#</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="F#">F#</option>
                        <option value="G">G</option>
                        <option value="G#">G#</option>
                        <option value="A">A</option>
                        <option value="A#">A#</option>
                        <option value="B">B</option>
                    </select>
                </div>
                <div class="param-row">
                    <label>Scale</label>
                    <select id="scaleMode">
                        <option value="major">Major</option>
                        <option value="minor">Natural Minor</option>
                        <option value="harmonicMinor">Harmonic Minor</option>
                        <option value="melodicMinor">Melodic Minor</option>
                        <option value="dorian">Dorian</option>
                        <option value="phrygian">Phrygian</option>
                        <option value="lydian">Lydian</option>
                        <option value="mixolydian">Mixolydian</option>
                        <option value="locrian">Locrian</option>
                        <option value="pentatonicMajor">Pentatonic Major</option>
                        <option value="pentatonicMinor">Pentatonic Minor</option>
                        <option value="blues">Blues</option>
                    </select>
                </div>
            </div>

            <div class="panel-section">
                <h2 class="section-title">TEMPO</h2>
                <div class="param-row">
                    <label>BPM</label>
                    <input type="range" id="tempo" min="40" max="240" value="120">
                    <span class="param-value" id="tempoValue">120</span>
                </div>
            </div>

            <div class="panel-section">
                <h2 class="section-title">STRUM</h2>
                <div class="param-row">
                    <label>Speed</label>
                    <input type="range" id="strumSpeed" min="10" max="200" value="60">
                    <span class="param-value" id="strumSpeedValue">60ms</span>
                </div>
                <div class="param-row">
                    <label>Variance</label>
                    <input type="range" id="strumVariance" min="0" max="100" value="30">
                    <span class="param-value" id="strumVarianceValue">30%</span>
                </div>
            </div>

            <div class="panel-section">
                <h2 class="section-title">ACTIONS</h2>
                <div class="mode-toggle" id="actionModeToggle">
                    <button class="mode-btn active" data-mode="motif">MOTIF</button>
                    <button class="mode-btn" data-mode="musician">MUSICIAN</button>
                    <button class="mode-btn" data-mode="nonMusician">NON-MUSICIAN</button>
                </div>
                <p class="mode-hint" id="actionModeHint">Generate and evolve gestural motifs on the grid.</p>
                <div class="param-row hidden" id="nonMusicianOctaveRow">
                    <label>Note Octave</label>
                    <input type="number" id="nonMusicianOctave" min="1" max="7" value="3">
                </div>
                <button class="action-btn regenerate-btn" id="regenerateGestures">
                    <span class="btn-icon">‚óà</span> REGENERATE GRID
                </button>
                <button class="action-btn evolve-btn" id="evolveMotif">
                    <span class="btn-icon">‚ú∫</span> EVOLVE
                </button>
                <button class="action-btn grid-toggle-btn" id="toggleGrid">
                    <span class="btn-icon">‚ñ¶</span> SHOW GRID
                </button>
            </div>
        </section>

        <!-- Center: Knob Display + Hidden Grid -->
        <section class="center-panel">
            <!-- Knob Column Types Display -->
            <div class="knob-display">
                <h2 class="section-title">COLUMN MODES</h2>
                <div class="knob-row">
                    <div class="knob-indicator" data-col="0">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel0">BLOCK</span>
                    </div>
                    <div class="knob-indicator" data-col="1">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel1">STRUM</span>
                    </div>
                    <div class="knob-indicator" data-col="2">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel2">ARP</span>
                    </div>
                    <div class="knob-indicator" data-col="3">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel3">SINGLE</span>
                    </div>
                    <div class="knob-indicator" data-col="4">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel4">BLOCK</span>
                    </div>
                    <div class="knob-indicator" data-col="5">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel5">STRUM</span>
                    </div>
                    <div class="knob-indicator" data-col="6">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel6">ARP</span>
                    </div>
                    <div class="knob-indicator" data-col="7">
                        <div class="knob-ring">
                            <div class="knob-pointer"></div>
                        </div>
                        <span class="knob-label" id="knobLabel7">SINGLE</span>
                    </div>
                </div>
            </div>

            <!-- Pad Grid (Hidden by default) -->
            <div class="pad-grid-container hidden" id="padGridContainer">
                <h2 class="section-title">GESTURE GRID</h2>
                <div class="pad-grid" id="padGrid">
                    <!-- 32 pads will be generated by JS -->
                </div>
            </div>

            <!-- Active Gesture Display -->
            <div class="active-gesture-display">
                <div class="gesture-info" id="activeGestureInfo">
                    <span class="gesture-type">‚Äî</span>
                    <span class="gesture-notes">Ready</span>
                </div>
            </div>
            <div class="synth-params-panel panel-section hidden" id="synthParamsPanel">
                <div class="section-title">synth parameters</div>
                <div class="synth-params-container" id="synthParamsContainer">
                <!-- Parameters will be dynamically generated here -->
            </div>
</div>
        </section>

        <!-- Right Panel: Effects + Recording -->
        <section class="effects-panel">
            <div class="panel-section">
                <h2 class="section-title">MIMEOPHON DELAY</h2>
                
                <div class="param-row">
                    <label>Send</label>
                    <input type="range" id="delaySend" min="0" max="100" value="0">
                    <span class="param-value" id="delaySendValue">0%</span>
                </div>
                
                <div class="zone-selector">
                    <button class="zone-btn active" data-zone="0">A</button>
                    <button class="zone-btn" data-zone="1">B</button>
                    <button class="zone-btn" data-zone="2">C</button>
                    <button class="zone-btn" data-zone="3">D</button>
                </div>
                
                <div class="param-row">
                    <label>Rate</label>
                    <input type="range" id="delayRate" min="0" max="100" value="50">
                    <span class="param-value" id="delayRateValue">50%</span>
                </div>
                
                <div class="param-row">
                    <label>ŒºRate</label>
                    <input type="range" id="delayMicroRate" min="0" max="100" value="0">
                    <span class="param-value" id="delayMicroRateValue">0%</span>
                </div>
                
                <div class="param-row">
                    <label>Repeats</label>
                    <input type="range" id="delayRepeats" min="0" max="120" value="30">
                    <span class="param-value" id="delayRepeatsValue">30%</span>
                </div>
                
                <div class="param-row">
                    <label>Color</label>
                    <input type="range" id="delayColor" min="0" max="100" value="50">
                    <span class="param-value" id="delayColorValue">tape</span>
                </div>
                
                <div class="param-row">
                    <label>Halo</label>
                    <input type="range" id="delayHalo" min="0" max="100" value="0">
                    <span class="param-value" id="delayHaloValue">0%</span>
                </div>
                
                <div class="toggle-row">
                    <button class="toggle-btn" id="delayHold">HOLD</button>
                    <button class="toggle-btn" id="delayFlip">FLIP</button>
                    <button class="toggle-btn" id="delayPingPong">P-P</button>
                </div>
            </div>

            <div class="panel-section">
                <h2 class="section-title">MASTER</h2>
                <div class="param-row">
                    <label>Volume</label>
                    <input type="range" id="masterVolume" min="0" max="100" value="80">
                    <span class="param-value" id="masterVolumeValue">80%</span>
                </div>
            </div>

            <div class="panel-section recording-section">
                <h2 class="section-title">RECORDER</h2>
                <div class="recorder-controls">
                    <button class="record-btn" id="recordBtn">
                        <span class="record-icon">‚óè</span>
                        <span class="record-text">REC</span>
                    </button>
                    <span class="record-time" id="recordTime">00:00</span>
                </div>
                <button class="action-btn download-btn hidden" id="downloadBtn">
                    <span class="btn-icon">‚Üì</span> DOWNLOAD WAV
                </button>
            </div>
        </section>
    </main>

    <footer class="footer">
        <span>GESTALT v1.0 ‚Äî Connect Ableton Move or use on-screen grid (A1-G3)</span>
        <span class="footer-hint">MIDI Notes 33-64 ‚Ä¢ CC 1-8 for knobs ‚Ä¢ Keys: ZXCV/ASDF/QWER/1234</span>
    </footer>

    <script type="module" src="js/main-colors.js"></script>
</body>
</html>
